# Remalux AR - Система покраски стен в дополненной реальности

Remalux AR - это приложение для Unity, которое позволяет обнаруживать стены в реальном мире с помощью компьютерного зрения и перекрашивать их в виртуальном пространстве, создавая эффект дополненной реальности.

## Возможности

- Обнаружение стен с помощью компьютерного зрения
- Создание 3D-моделей стен в реальном времени
- Покраска стен в различные цвета
- Интуитивно понятный пользовательский интерфейс
- Возможность сброса цветов стен
- Поддержка различных текстур и материалов

## Требования

- Unity 2021.3 или новее
- OpenCVForUnity (активирован для macOS)
- Устройство с камерой

## Установка

1. Клонируйте репозиторий
2. Откройте проект в Unity
3. Убедитесь, что OpenCVForUnity активирован для вашей платформы
4. Запустите сцену `WallPainting`

## Использование

1. **Обнаружение стен**:
   - Запустите приложение и направьте камеру на стены
   - Система автоматически обнаружит вертикальные поверхности
   - Когда стены будут обнаружены, появится кнопка "Начать покраску"

2. **Покраска стен**:
   - Нажмите кнопку "Начать покраску"
   - Выберите цвет из палитры
   - Нажмите на стену, чтобы применить выбранный цвет
   - Используйте кнопку "Сбросить", чтобы вернуть стены к исходному виду

3. **Возврат к обнаружению**:
   - Нажмите кнопку "Назад", чтобы вернуться в режим обнаружения стен

## Структура проекта

- `Assets/Scripts/Managers/` - Основные менеджеры приложения
  - `WallPaintingManager.cs` - Координирует процесс покраски стен
  - `WallPainter.cs` - Отвечает за покраску стен
  - `ComputerVisionWallDetector.cs` - Обнаруживает стены с помощью компьютерного зрения
  - `MeshBuilder.cs` - Создает 3D-модели стен
- `Assets/Scripts/Vision/` - Компоненты компьютерного зрения
  - `WallSegmentation.cs` - Сегментация стен на изображении
  - `ImageProcessor.cs` - Обработка изображений для обнаружения стен
- `Assets/Scripts/UI/` - Компоненты пользовательского интерфейса
  - `WallPaintingUI.cs` - Управление интерфейсом покраски стен

## Настройка параметров

Для настройки параметров обнаружения стен и покраски, вы можете изменить следующие значения в инспекторе Unity:

- **WallDetectionManager**:
  - `WALL_HEIGHT` - Высота стен (по умолчанию 3.0 метра)
  - `WALL_EXTENSION` - Коэффициент расширения стен (по умолчанию 1.2)

- **ImageProcessor**:
  - `thresholdValue` - Порог для обнаружения краев (по умолчанию 50)
  - `minLineLength` - Минимальная длина линии (по умолчанию 50)
  - `maxLineGap` - Максимальный разрыв между линиями (по умолчанию 10)

- **WallPaintingManager**:
  - `autoStartPainting` - Автоматически начинать покраску после обнаружения стен
  - `minDetectionTime` - Минимальное время обнаружения стен (по умолчанию 3 секунды)

## Устранение неполадок

- **Стены не обнаруживаются**:
  - Убедитесь, что камера направлена на хорошо освещенные вертикальные поверхности
  - Попробуйте уменьшить значение `thresholdValue` в настройках `ImageProcessor`
  - Увеличьте значение `maxLineGap` для лучшего соединения фрагментированных линий

- **Ошибки с OpenCVForUnity**:
  - Убедитесь, что плагин OpenCVForUnity активирован для вашей платформы
  - Проверьте, что все DLL-файлы OpenCvSharp отключены, чтобы избежать конфликтов

## Лицензия

Этот проект распространяется под лицензией MIT. См. файл LICENSE для получения дополнительной информации. 